{"version":3,"sources":["services/persons.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","Filter","searchName","handleSearch","value","onChange","PersonForm","props","onSubmit","addName","newName","handleNameChange","newNumber","handleNumberChange","type","Person","person","deletingPerson","name","number","onClick","window","confirm","Persons","persons","map","key","Notification","message","style","className","App","useState","setPersons","setNewName","setNewNumber","setSearchName","setMessage","setStyle","useEffect","personService","initialPersons","console","log","length","personsToShow","filter","toLowerCase","includes","updatingPerson","find","n","changedPerson","returnedPerson","p","setNotification","catch","error","setTimeout","event","target","preventDefault","personObject","a","concat","deleted","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.2c5c8434.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\n\r\nconst getAll = () => {\r\n    const request = axios.get(baseUrl)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n  const create = newObject => {\r\n    const request = axios.post(baseUrl, newObject)\r\n    return request.then(response => response.data)\r\n  }\r\n  \r\n  const update = (id, newObject) => {\r\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\n  const deletePerson = (id) => {\r\n    const request = axios.delete(`${baseUrl}/${id}`)\r\n    return request.then(response => response.data)\r\n  }\r\n\r\nexport default {    \r\n  getAll: getAll, \r\n  create: create, \r\n  update: update,\r\n  deletePerson: deletePerson\r\n}","import React, { useState, useEffect } from 'react'\r\nimport personService from './services/persons'\r\n\r\n\r\nconst Filter = ({searchName, handleSearch}) => {\r\n    return (  \r\n        <div>\r\n            filter shown with <input value={searchName} onChange={handleSearch} /> <br/>          \r\n        </div> \r\n    )\r\n}\r\n\r\nconst PersonForm = (props) => {\r\n    return (  \r\n        <form  onSubmit={props.addName}>\r\n        <div>\r\n          name: <input value={props.newName} onChange={props.handleNameChange} /> <br/><br/>\r\n          number: <input value={props.newNumber} onChange={props.handleNumberChange} />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form> \r\n    )\r\n}\r\n\r\n\r\nconst Person = ({ person, deletingPerson }) => {\r\n\r\n  return (         \r\n    <li><div>\r\n       {person.name}  {person.number}\r\n       <button onClick={() => {if (window.confirm(`Delete ${person.name}?`)) {deletingPerson(person.id) }    }}>\r\n           Delete\r\n        </button> \r\n    </div></li>\r\n  )\r\n}\r\n\r\nconst Persons = ({persons, deletingPerson}) => {\r\n    return (  \r\n        <div>\r\n            <ul>\r\n            {\r\n              persons.map((person) =>\r\n               \r\n                  <Person deletingPerson={deletingPerson} key={person.name} person={person} />          \r\n              )\r\n            }\r\n            </ul>          \r\n        </div> \r\n    )\r\n}\r\n\r\n\r\nconst Notification = ({ message, style }) => {\r\n  if (message === null) {\r\n    return null\r\n  }\r\n\r\n  return (\r\n    <div className={style}>\r\n      {message}\r\n    </div>\r\n  )\r\n}\r\n\r\nconst App = () => {\r\n  const [ persons, setPersons] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ searchName, setSearchName ] = useState('')\r\n  const [ message, setMessage] = useState(null)\r\n  const [ style, setStyle] = useState(null)\r\n\r\n  useEffect(() => {\r\n    personService\r\n      .getAll()\r\n      .then(initialPersons => {\r\n        setPersons(initialPersons)\r\n      })\r\n  }, [])\r\n\r\n  console.log('render', persons.length, 'persons')\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n\r\n    const personObject = {\r\n        name: newName,\r\n        number: newNumber\r\n    }\r\n\r\n    let names = persons.map(a => a.name);\r\n\r\n    if (names.includes(newName) === true) {\r\n      let message = `${newName}  is already added to phonebook, replace the old number with a new one?`\r\n      if (window.confirm(`${message}`)) {updatingPerson(newName) }\r\n    }\r\n    else{  \r\n      personService\r\n      .create(personObject)\r\n        .then(returnedPerson => {\r\n        setPersons(persons.concat(returnedPerson))\r\n        setNewName('')\r\n        setNewNumber('')\r\n        setNotification(\"message\",  `Added '${personObject.name}' `)\r\n      })\r\n      .catch(error => {\r\n        setNotification(\"error\",  `${error.response.data.error}`)\r\n      })    \r\n    }\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)    \r\n  }\r\n\r\n  const handleSearch = (event) => {\r\n    setSearchName(event.target.value)\r\n  }\r\n\r\n  const personsToShow = persons.filter\r\n    (person => person.name.toLowerCase().includes(searchName.toLowerCase()))\r\n  \r\n  const deletingPerson = id => {\r\n      personService\r\n      .deletePerson(id)\r\n        .then( () => {\r\n          const deleted = persons.filter(person => person.id === id)\r\n          setNotification(\"message\",  `Deleted '${deleted[0].name}' `)\r\n          setPersons(persons.filter(person => person.id !== id))         \r\n      })\r\n    }\r\n\r\n  const updatingPerson = name => {\r\n    const person = persons.find(n => n.name === name)\r\n    const changedPerson = { ...person, number: newNumber }\r\n    personService\r\n    .update(person.id, changedPerson).then(returnedPerson => {\r\n      setPersons(persons.map(p => p.id !== person.id ? p : returnedPerson))\r\n      setNewName('')\r\n      setNewNumber('')\r\n      setNotification(\"message\", `Updated '${person.name}' `)\r\n\r\n    })\r\n    .catch(error => {\r\n      setNotification(\"error\", `Information of '${person.name}' has already been removed from server`)\r\n      setPersons(persons.filter(n => n.id !== person.id))\r\n      setNewName('')\r\n      setNewNumber('')\r\n    })\r\n  }\r\n\r\n  const setNotification = (style, message) => {\r\n    setStyle(style)\r\n    setMessage(message)\r\n\r\n    setTimeout(() => {\r\n      setMessage(null)\r\n    }, 5000)\r\n  }\r\n  \r\n  return (\r\n    <div>\r\n        <h2>Phonebook</h2>\r\n\r\n        <Notification message={message} style={style} />\r\n\r\n        <Filter searchName={searchName} handleSearch={handleSearch} />\r\n      \r\n        <h2>Add a new</h2>\r\n        <PersonForm addName={addName} \r\n                    newName={newName} \r\n                    handleNameChange={handleNameChange} \r\n                    newNumber={newNumber} \r\n                    handleNumberChange={handleNumberChange}  />\r\n\r\n        <h2>Numbers</h2>\r\n        <Persons   deletingPerson={deletingPerson} persons={personsToShow}/>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport App from './App'\r\nimport './index.css'\r\n\r\n\r\n\r\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}